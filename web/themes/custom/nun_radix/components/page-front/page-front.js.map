{"version":3,"file":"/components/page-front/page-front.js","mappings":"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","sources":["webpack://nun_radix/./components/page-front/_page-front.js"],"sourcesContent":["(function ($, Drupal) {\n    $(document).ready(function() {\n        // site CSS is 'relative' which messes with the curtain.\n        $('body').css('position','initial');\n        $('#edit-field-encounter-tags-tid option:first-of-type').replaceWith('<option value=\"All\" selected=\"selected\">Show only these encounters</option>');\n\n        $('a.announcement-visibility').click(function(e) {\n          e.preventDefault();\n          $('.path-frontpage .view-announcements .views-field-field-thumbnail, .path-frontpage .view-announcements .views-field-field-announcement-details').slideToggle('medium');\n\n          //changing from visible to hidden, swap icons\n          if($(this).find('i').hasClass('fa-eye-slash')) {\n            $(this).find('i').addClass('fa-eye');\n            $(this).find('i').removeClass('fa-eye-slash');\n            $('.path-frontpage .view-announcements .views-field-title').addClass('smaller');\n          }\n          //changing from hidden to visible, swap icons\n          else {\n            $(this).find('i').removeClass('fa-eye');\n            $(this).find('i').addClass('fa-eye-slash');\n            $('.path-frontpage .view-announcements .views-field-title').removeClass('smaller');\n          }\n        });\n\n        function putButtonInRightPlace() {\n          //want to set the  div's height based on the height of the map background image\n          var background_height = $('.map-bg-img').height();\n          var background_width = $('.map-bg-img').width();\n          //set the div's height to the height we calculated\n          $('.map-bg').css('height', background_height);\n\n          //get buttons sizes, using outerHeight here to include the padding and border\n          var button_height = $('.go-explore').outerHeight();\n          var button_width = $('.go-explore').outerWidth();\n\n          var left = (background_width / 2 ) - (button_width / 2);\n          $('.go-explore').css('left', left);\n\n          var top = (background_height / 2) - (button_height / 2);\n          $('.go-explore').css('top', top);\n\n          $('.go-explore').css('display', 'inline-block');\n        }\n\n        //these are for initial sizing of Go Explore button over middle of map, and adjustments on resizing\n        $(window).on(\"load\",putButtonInRightPlace);\n        $(window).on(\"resize\",putButtonInRightPlace);\n\n        //total height of the current window\n        //the height elements naturally use based on auto height\n        /*(var windowHeight = window.innerHeight;\n        var naturalHeight = $('#peel-away').height();\n        var heightDifference = 0;\n        var startingSpacerHeight = $('.peel-away-spacer').height();\n        var calculatedSpacerHeight = 0;*/\n\n        //resizeElements();\n\n        //this keeps the width and heights set to their view pane should they resize the window\n        $(window).resize(resizeElements);\n\n        function resizeElements() {\n          //set defaults before testing to see if we need adjustments below\n          $('#peel-away').css('height', 'auto');\n          $('#peel-away .arrow').removeClass('absolute');\n          //this is the default for mobile, anything other than this will be adjusted\n          $('.peel-away-spacer').css('height', '111px');\n\n          var windowHeight = window.innerHeight;\n          var windowWidth = window.innerWidth;\n          var naturalHeight = $('#peel-away').height();\n\n          if(windowHeight > naturalHeight && windowWidth >= 768) {\n            $('#peel-away').css('height', windowHeight+'px');\n            //$('.peel-away-spacer').css('height', windowHeight+'px');\n            //add class to absolutely position arrow at bottom of page\n            $('#peel-away .arrow').addClass('absolute');\n          }\n        }\n\n      function Curtain($curtain) {\n\n        var self = this,\n            $el = $curtain,\n            $body = $(\"body\"),\n            $wrapper = $(\".home-wrapper\");\n\n        // Tracking curtain movement and status\n        self.height = 0;\n        self.buffer = 20;\n\n        self.init = function() {\n          window.scrollTo(0, 1);\n\n          $(document).bind(\"respond\", function(e) {\n            if(e.size == \"tiny\" || e.size == \"small\" || e.size == \"medium\") {\n              self.reset();\n            }\n            else if(e.size == \"large\") {\n              if ($body.is('.force-curtain-fallback')) {\n                self.reset();\n              }\n              else {\n                self.setup();\n              }\n            }\n          });\n\n          $('.down-arrow').on('click', self.unfurl);\n        }\n\n        self.setup = function() {\n          $body.css({\"min-height\": $body.height()});\n\n          self.setCurtainFocus(false);\n          self.bind();\n        }\n\n        self.reset = function() {\n          $body.removeAttr(\"style\");\n          $wrapper.removeClass(\"on\").removeAttr(\"style\");\n\n          self.unbind();\n        }\n\n        self.bind = function() {\n          $(window).on(\"scroll\", self.handleScroll);\n        }\n\n        self.unbind = function() {\n          $(window).off(\"scroll\");\n        }\n\n        self.handleScroll = function(e) {\n          var scrollFactor = document.documentElement.scrollTop || $(document).scrollTop();\n\n          // If we're scrolled down past the curtain, let the page scroll\n          if(scrollFactor > self.getTotalHeight()) {\n            self.setCurtainFocus(true);\n          }\n          // And if we're not, make sure the curtain is all that scrolls\n          else {\n            self.setCurtainFocus(false);\n          }\n        }\n\n        self.setCurtainFocus = function(state) {\n          self.updateHeight();\n\n          if(state) {\n            $wrapper.attr(\"style\", \"margin-top: \" + self.getTotalHeight() + \"px\");\n            $wrapper.removeClass(\"fixed\");\n          }\n          else {\n            $wrapper.attr(\"style\", \"margin-bottom: \" + self.getTotalHeight() + \"px\");\n            $wrapper.addClass(\"fixed\");\n          }\n        }\n\n        // Update the height of the curtain, in case it's changed\n        self.updateHeight = function() {\n          self.height = $curtain.height();\n          return self.height;\n        }\n\n        // Curtain height plus an arbitrary buffer\n        self.getTotalHeight = function() {\n          return self.height + self.buffer;\n        }\n\n        self.unfurl = function() {\n          var scrollFactor = self.height + self.buffer;\n\n          // Unbind for a second\n          self.unbind();\n\n          $('html, body').animate({\n            scrollTop: scrollFactor\n          }, {\n            duration: 400,\n            complete: function() {\n              self.bind();\n            }\n          });\n        }\n\n        self.init();\n      }\n\n      $(function() {\n        var $curtain = $(\".peel-away\");\n\n        if($curtain.length) {\n          Curtain($curtain);\n        }\n      });\n\n      var StateManager = {\n        state: \"\",\n        touch: 'ontouchstart' in document.documentElement,\n\n        handleResize: function() {\n          var width = jQuery(\"body\").width();\n\n          if (width < 480 && this.state != \"tiny\") {\n            this.state = \"tiny\";\n            var e = jQuery.Event( \"respond\", { size: this.state } );\n            jQuery(document).trigger(e);\n          } else if (width > 479 && width < 601 && this.state != \"small\") {\n            this.state = \"small\";\n            var e = jQuery.Event( \"respond\", { size: this.state } );\n            jQuery(document).trigger(e);\n          } else if (width > 600 && width < 768 && this.state != \"medium\") {\n            this.state = \"medium\";\n            var e = jQuery.Event( \"respond\", { size: this.state } );\n            jQuery(document).trigger(e);\n          } else if (width > 767 && this.state != \"large\") {\n            this.state = \"large\";\n            var e = jQuery.Event( \"respond\", { size: this.state } );\n            jQuery(document).trigger(e);\n          }\n        },\n\n        init: function() {\n          var self = this;\n          self.handleResize();\n          jQuery(window).bind(\"resize\", function(){ self.handleResize(); });\n          if(StateManager.touch) {\n            //console.log(\"got touch!\");\n            jQuery(\"body\").addClass(\"touch\");\n          }\n        }\n      };\n\n      jQuery(function() {\n        StateManager.init();\n        jQuery(window).on(\"load\",function() {\n          StateManager.state = '';\n          jQuery(window).trigger('resize');\n        });\n      });\n\n\n\n  });\n})(jQuery, Drupal);\n\n"],"names":["$","jQuery","Drupal","document","ready","putButtonInRightPlace","background_height","height","background_width","width","css","button_height","outerHeight","left","outerWidth","top","replaceWith","click","e","preventDefault","slideToggle","this","find","hasClass","addClass","removeClass","window","on","resize","windowHeight","innerHeight","windowWidth","innerWidth","naturalHeight","$curtain","length","self","$body","$wrapper","buffer","init","scrollTo","bind","size","reset","is","setup","unfurl","setCurtainFocus","removeAttr","unbind","handleScroll","off","documentElement","scrollTop","getTotalHeight","state","updateHeight","attr","scrollFactor","animate","duration","complete","Curtain","StateManager","touch","handleResize","Event","trigger"],"sourceRoot":""}